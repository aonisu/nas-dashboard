# NAS Dashboard ç¦»çº¿æ„å»ºæŒ‡å—

## ğŸ¯ ç”±äºç½‘ç»œé—®é¢˜ï¼Œè¯·åœ¨ç¾¤æ™– NAS ä¸Šç›´æ¥æ„å»º

### æ–¹æ¡ˆä¸€ï¼šåœ¨ç¾¤æ™– NAS ä¸Šæ„å»ºï¼ˆæ¨èï¼‰

#### 1. ä¸Šä¼ å®Œæ•´é¡¹ç›®
å°†æ•´ä¸ª `nasç®¡åº”ç”¨ç®¡ç†å¹³å°` æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°ç¾¤æ™– NASï¼š
- è·¯å¾„ï¼š`/volume1/docker/nas-dashboard/`
- ç¡®ä¿åŒ…å«æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•

#### 2. SSH è¿æ¥æ„å»º
```bash
# SSH è¿æ¥åˆ°ç¾¤æ™– NAS
ssh admin@ä½ çš„NAS_IP

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /volume1/docker/nas-dashboard/

# æ„å»ºé•œåƒï¼ˆç¾¤æ™–ç½‘ç»œé€šå¸¸æ›´ç¨³å®šï¼‰
docker build -t nas-dashboard:latest .

# å¯¼å‡ºé•œåƒä¸º tar æ–‡ä»¶
docker save -o nas-dashboard.tar nas-dashboard:latest

# æ£€æŸ¥æ–‡ä»¶
ls -lh nas-dashboard.tar
```

#### 3. Container Manager å¯¼å…¥
1. Container Manager â†’ æ˜ åƒ â†’ æ–°å¢ â†’ ä»æ–‡ä»¶æ–°å¢
2. é€‰æ‹© `/volume1/docker/nas-dashboard/nas-dashboard.tar`
3. å¯¼å…¥å®Œæˆåç‚¹å‡»å¯åŠ¨æŒ‰é’®

### æ–¹æ¡ˆäºŒï¼šé¢„æ„å»ºé•œåƒï¼ˆå¤‡ç”¨ï¼‰

å¦‚æœç¾¤æ™–æ„å»ºä¹Ÿæœ‰é—®é¢˜ï¼Œæˆ‘ä¸ºæ‚¨å‡†å¤‡äº†é¢„æ„å»ºæ–¹æ¡ˆï¼š

#### åˆ›å»º Dockerfile.local
```dockerfile
# æœ¬åœ°æ„å»ºç‰ˆæœ¬ - æ›´å°çš„åŸºç¡€é•œåƒ
FROM alpine:latest

# å®‰è£…å¿…éœ€çš„åŒ…
RUN apk add --no-cache nodejs npm

# åˆ›å»ºåº”ç”¨ç›®å½•
WORKDIR /app

# å¤åˆ¶é¡¹ç›®æ–‡ä»¶
COPY . .

# å®‰è£…ä¾èµ–å’Œæ„å»º
RUN cd client && npm install && npm run build
RUN cd server && npm install && npm run build

# å¤åˆ¶æ„å»ºç»“æœ
RUN cp -r client/dist server/dist/client/
RUN mkdir -p /app/data

# æš´éœ²ç«¯å£
EXPOSE 3000

# å¯åŠ¨å‘½ä»¤
CMD ["node", "server/dist/index.js"]
```

#### ä½¿ç”¨æœ¬åœ° Dockerfile
```bash
# åœ¨ NAS ä¸Šä½¿ç”¨æœ¬åœ° Dockerfile
cd /volume1/docker/nas-dashboard/
docker build -f Dockerfile.local -t nas-dashboard:latest .
docker save -o nas-dashboard.tar nas-dashboard:latest
```

## ğŸ“¦ å®Œæ•´å®‰è£…åŒ…å†…å®¹

æˆ‘ä¸ºæ‚¨å‡†å¤‡çš„å®‰è£…åŒ…åŒ…å«ï¼š

### æ ¸å¿ƒæ–‡ä»¶
- âœ… `Dockerfile` - æ ‡å‡†æ„å»ºæ–‡ä»¶
- âœ… `Dockerfile.local` - å¤‡ç”¨æ„å»ºæ–‡ä»¶  
- âœ… `docker-compose.yml` - ç¼–æ’é…ç½®
- âœ… `package.json` - é¡¹ç›®é…ç½®

### æºä»£ç 
- âœ… `client/` - å‰ç«¯ React åº”ç”¨
- âœ… `server/` - åç«¯ Node.js æœåŠ¡

### éƒ¨ç½²è„šæœ¬
- âœ… `synology-deploy.sh` - ä¸€é”®éƒ¨ç½²è„šæœ¬
- âœ… `build-image.sh` - é•œåƒæ„å»ºè„šæœ¬
- âœ… `quick-deploy.sh` - å¿«é€Ÿéƒ¨ç½²è„šæœ¬

### æ–‡æ¡£æŒ‡å—
- âœ… `ç¾¤æ™–æ ‡å‡†éƒ¨ç½²æŒ‡å—.md` - å®Œæ•´æ“ä½œæµç¨‹
- âœ… `å›¾å½¢åŒ–æ“ä½œæ­¥éª¤.md` - ç•Œé¢æ“ä½œè¯´æ˜
- âœ… `container-config-template.md` - é…ç½®æ¨¡æ¿
- âœ… `ç¦»çº¿æ„å»ºæŒ‡å—.md` - æœ¬æŒ‡å—

## ğŸš€ æ¨èå®‰è£…æµç¨‹

### æ­¥éª¤ 1: ä¸Šä¼ é¡¹ç›®
å°†æ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°ç¾¤æ™– NAS

### æ­¥éª¤ 2: ä¸€é”®æ„å»º
```bash
ssh admin@ä½ çš„NAS_IP
cd /volume1/docker/nas-dashboard/
chmod +x synology-deploy.sh
./synology-deploy.sh
# é€‰æ‹©é€‰é¡¹ 2 (ä»…æ„å»ºé•œåƒ)
```

### æ­¥éª¤ 3: Container Manager å¯¼å…¥
- æ˜ åƒ â†’ æ–°å¢ â†’ ä»æ–‡ä»¶æ–°å¢
- é€‰æ‹©ç”Ÿæˆçš„ `nas-dashboard.tar`

### æ­¥éª¤ 4: é…ç½®å¯åŠ¨
æŒ‰ç…§ `å›¾å½¢åŒ–æ“ä½œæ­¥éª¤.md` è¿›è¡Œé…ç½®

## ğŸ“‹ é…ç½®è¦ç‚¹æé†’

### å¿…éœ€ç«¯å£
```
æœ¬åœ°ç«¯å£: 3000
å®¹å™¨ç«¯å£: 3000
```

### å¿…éœ€å­˜å‚¨è£…è½½
```
/volume1/docker/nas-dashboard/data â†’ /app/data
/var/run/docker.sock â†’ /var/run/docker.sock (åªè¯»)
```

### å¿…éœ€ç¯å¢ƒå˜é‡
```
NODE_ENV=production
PORT=3000
DB_PATH=/app/data/database.sqlite
TZ=Asia/Shanghai
```

## ğŸ†˜ å¦‚æœæ„å»ºå¤±è´¥

å¦‚æœåœ¨ç¾¤æ™–ä¸Šæ„å»ºä¹Ÿå¤±è´¥ï¼š

### 1. æ£€æŸ¥ç½‘ç»œ
```bash
# æµ‹è¯•ç½‘ç»œè¿æ¥
ping -c 4 registry-1.docker.io
```

### 2. ä½¿ç”¨ä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
```bash
# è®¾ç½® Docker ä»£ç†
sudo mkdir -p /etc/systemd/system/docker.service.d
sudo tee /etc/systemd/system/docker.service.d/http-proxy.conf <<EOF
[Service]
Environment="HTTP_PROXY=http://ä»£ç†åœ°å€:ç«¯å£"
Environment="HTTPS_PROXY=http://ä»£ç†åœ°å€:ç«¯å£"
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```

### 3. æ‰‹åŠ¨ä¸‹è½½åŸºç¡€é•œåƒ
```bash
# æ‰‹åŠ¨æ‹‰å–åŸºç¡€é•œåƒ
docker pull node:18-alpine
docker pull alpine:latest
```

---

**ğŸ“¦ å®‰è£…åŒ…å·²å‡†å¤‡å®Œæ¯•ï¼Œè¯·ä¸Šä¼ åˆ°ç¾¤æ™– NAS å¹¶æŒ‰ç…§æŒ‡å—æ“ä½œï¼**