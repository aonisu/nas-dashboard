# ç¾¤æ™– NAS éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. ç³»ç»Ÿè¦æ±‚
- ç¾¤æ™– NAS (DSM 7.0+)
- Docker å¥—ä»¶å·²å®‰è£…
- SSH è®¿é—®æƒé™ (æ¨è) æˆ– Container Manager

### 2. ç¡¬ä»¶è¦æ±‚
- RAM: æœ€å°‘ 1GB å¯ç”¨å†…å­˜
- å­˜å‚¨: çº¦ 100MB ç£ç›˜ç©ºé—´
- CPU: ä»»ä½•ç°ä»£ ARM64/x64 å¤„ç†å™¨

## ğŸš€ æ–¹æ³•ä¸€ï¼šSSH å‘½ä»¤è¡Œéƒ¨ç½²ï¼ˆæ¨èï¼‰

### æ­¥éª¤ 1: ä¸Šä¼ é¡¹ç›®æ–‡ä»¶

1. å°†æ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ä¸Šä¼ åˆ° NASï¼Œå»ºè®®è·¯å¾„ï¼š
   ```
   /volume1/docker/nas-dashboard/
   ```

2. é€šè¿‡ SSH è¿æ¥åˆ° NASï¼š
   ```bash
   ssh admin@ä½ çš„NAS_IPåœ°å€
   ```

3. è¿›å…¥é¡¹ç›®ç›®å½•ï¼š
   ```bash
   cd /volume1/docker/nas-dashboard/
   ```

### æ­¥éª¤ 2: è¿è¡Œéƒ¨ç½²è„šæœ¬

```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy-to-nas.sh

# è¿è¡Œéƒ¨ç½²
./deploy-to-nas.sh
```

### æ­¥éª¤ 3: è®¿é—®åº”ç”¨

éƒ¨ç½²æˆåŠŸåï¼Œé€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
- **å†…ç½‘è®¿é—®**: `http://ä½ çš„NAS_IP:3000`
- **æœ¬åœ°è®¿é—®**: `http://localhost:3000` (åœ¨ NAS ä¸Š)

## ğŸ–¥ï¸ æ–¹æ³•äºŒï¼šContainer Manager å›¾å½¢ç•Œé¢éƒ¨ç½²

### æ­¥éª¤ 1: æ‰“å¼€ Container Manager

1. ç™»å½• DSM
2. æ‰“å¼€ "Container Manager" å¥—ä»¶
3. é€‰æ‹© "é¡¹ç›®" æ ‡ç­¾é¡µ

### æ­¥éª¤ 2: åˆ›å»ºæ–°é¡¹ç›®

1. ç‚¹å‡» "æ–°å¢"
2. é€‰æ‹© "ä»æ–‡ä»¶å¤¹åˆ›å»º"
3. é€‰æ‹©ä¸Šä¼ çš„é¡¹ç›®æ–‡ä»¶å¤¹
4. è®¾ç½®é¡¹ç›®åç§°: `nas-dashboard`

### æ­¥éª¤ 3: é…ç½®è®¾ç½®

1. **ç«¯å£æ˜ å°„**: 
   - å®¹å™¨ç«¯å£: 3000
   - æœ¬åœ°ç«¯å£: 3000 (å¯è‡ªå®šä¹‰)

2. **å­˜å‚¨æ˜ å°„**:
   - å®¹å™¨è·¯å¾„: `/app/data`
   - æœ¬åœ°è·¯å¾„: `/volume1/docker/nas-dashboard/data`

3. **Docker Socket**:
   - å®¹å™¨è·¯å¾„: `/var/run/docker.sock`
   - æœ¬åœ°è·¯å¾„: `/var/run/docker.sock`
   - æƒé™: åªè¯»

### æ­¥éª¤ 4: å¯åŠ¨å®¹å™¨

1. ç‚¹å‡» "ä¸‹ä¸€æ­¥" â†’ "å®Œæˆ"
2. ç­‰å¾…é•œåƒæ„å»ºå’Œå®¹å™¨å¯åŠ¨
3. åœ¨é¡¹ç›®åˆ—è¡¨ä¸­ç¡®è®¤çŠ¶æ€ä¸º "æ­£åœ¨è¿è¡Œ"

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
```bash
NODE_ENV=production          # ç”Ÿäº§ç¯å¢ƒ
PORT=3000                   # æœåŠ¡ç«¯å£
DB_PATH=/app/data/database.sqlite  # æ•°æ®åº“è·¯å¾„
TZ=Asia/Shanghai           # æ—¶åŒºè®¾ç½®
```

### æ•°æ®æŒä¹…åŒ–
- æ•°æ®åº“æ–‡ä»¶: `./data/database.sqlite`
- ç³»ç»Ÿé…ç½®: `./data/settings.json`
- å†å²ç»Ÿè®¡: `./data/stats.db`

## ğŸ›¡ï¸ å®‰å…¨é…ç½®

### 1. ç½‘ç»œå®‰å…¨
```yaml
# ä»…å†…ç½‘è®¿é—®ï¼ˆæ¨èï¼‰
ports:
  - "127.0.0.1:3000:3000"  # åªå…è®¸æœ¬æœºè®¿é—®
  # æˆ–
  - "192.168.0.0/16:3000:3000"  # åªå…è®¸å†…ç½‘è®¿é—®
```

### 2. Docker Socket æƒé™
é»˜è®¤é…ç½®å·²è®¾ç½®ä¸ºåªè¯»æ¨¡å¼ï¼Œç¡®ä¿å®‰å…¨æ€§ã€‚

### 3. é˜²ç«å¢™è®¾ç½®
åœ¨ DSM æ§åˆ¶é¢æ¿ä¸­ï¼š
1. å®‰å…¨æ€§ â†’ é˜²ç«å¢™
2. æ·»åŠ è§„åˆ™å…è®¸ç«¯å£ 3000
3. è®¾ç½®æ¥æº IP èŒƒå›´ï¼ˆå»ºè®®ä»…å†…ç½‘ï¼‰

## ğŸ“Š åŠŸèƒ½è¯´æ˜

### ä¸»è¦åŠŸèƒ½
- ğŸ¯ **ä»ªè¡¨æ¿**: ç³»ç»Ÿèµ„æºç›‘æ§
- ğŸ”— **é“¾æ¥ç®¡ç†**: Docker æœåŠ¡å¿«é€Ÿè®¿é—®
- ğŸ’» **ç³»ç»Ÿä¿¡æ¯**: ç¡¬ä»¶çŠ¶æ€ç›‘æ§
- ğŸ³ **Docker ç®¡ç†**: å®¹å™¨å¯åœæ§åˆ¶
- âš™ï¸ **è®¾ç½®**: ä¸»é¢˜å’Œé…ç½®é€‰é¡¹

### ç›‘æ§å†…å®¹
- CPU ä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨æƒ…å†µ
- ç£ç›˜ç©ºé—´çŠ¶æ€
- ç½‘ç»œæ¥å£ä¿¡æ¯
- Docker å®¹å™¨çŠ¶æ€

## ğŸ”„ ç»´æŠ¤æ“ä½œ

### æŸ¥çœ‹æ—¥å¿—
```bash
cd /volume1/docker/nas-dashboard/
docker-compose logs -f
```

### é‡å¯æœåŠ¡
```bash
docker-compose restart
```

### æ›´æ–°åº”ç”¨
```bash
git pull  # å¦‚æœä½¿ç”¨ Git
./deploy-to-nas.sh
```

### å¤‡ä»½æ•°æ®
```bash
# å¤‡ä»½æ•°æ®ç›®å½•
tar -czf nas-dashboard-backup-$(date +%Y%m%d).tar.gz ./data/
```

### å®Œå…¨æ¸…ç†
```bash
docker-compose down
docker rmi nas-dashboard_nas-dashboard
rm -rf ./data/  # æ³¨æ„ï¼šè¿™ä¼šåˆ é™¤æ‰€æœ‰æ•°æ®
```

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å®¹å™¨å¯åŠ¨å¤±è´¥**
   ```bash
   # æ£€æŸ¥æ—¥å¿—
   docker-compose logs
   
   # æ£€æŸ¥ç«¯å£å ç”¨
   netstat -tlnp | grep 3000
   ```

2. **Docker Socket æƒé™é—®é¢˜**
   ```bash
   # æ£€æŸ¥ Docker Socket æƒé™
   ls -l /var/run/docker.sock
   
   # ç¡®ä¿ç”¨æˆ·åœ¨ docker ç»„ä¸­
   groups $USER
   ```

3. **æ•°æ®åº“é”å®šé—®é¢˜**
   ```bash
   # é‡å¯å®¹å™¨
   docker-compose restart
   ```

4. **å†…å­˜ä¸è¶³**
   ```bash
   # æ£€æŸ¥ç³»ç»Ÿèµ„æº
   free -h
   df -h
   ```

### è”ç³»æ”¯æŒ
å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. DSM ç‰ˆæœ¬æ˜¯å¦æ”¯æŒ
2. Docker å¥—ä»¶æ˜¯å¦æ­£å¸¸è¿è¡Œ
3. ç³»ç»Ÿèµ„æºæ˜¯å¦å……è¶³
4. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- é¡¹ç›®åœ°å€: [GitHub ä»“åº“]
- é—®é¢˜åé¦ˆ: [Issues é¡µé¢]
- æ–‡æ¡£: [é¡¹ç›® Wiki]

---

ğŸ‰ **äº«å—æ‚¨çš„ NAS ç®¡ç†ä½“éªŒï¼**